<p-toast></p-toast>

<div class="checker-container">
  <div class="action-bar">
    <button pButton label="Approve" icon="pi pi-check" class="p-button-success" 
            [disabled]="!selectedRecord"></button>
    <button pButton label="Edit" icon="pi pi-pencil" class="p-button-warning" 
            [disabled]="!selectedRecord" (click)="openEdit()"></button>
  </div>

  <p-table [value]="gridData" [(selection)]="selectedRecord" selectionMode="single" dataKey="id" 
           [paginator]="true" [rows]="10" [loading]="loading" class="p-datatable-sm">
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3rem"></th>
        <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
        <th pSortableColumn="issueName">Issue <p-sortIcon field="issueName"></p-sortIcon></th>
        <th pSortableColumn="currency">Currency</th>
        <th pSortableColumn="amount">Amount</th>
        <th>Status</th>
      </tr>
      <tr>
        <th></th>
        <th><p-columnFilter type="text" field="id"></p-columnFilter></th>
        <th><p-columnFilter type="text" field="issueName"></p-columnFilter></th>
        <th>
          <p-columnFilter field="currency" matchMode="equals" [showMenu]="false">
            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
              <p-select [ngModel]="value" [options]="currencies" (onChange)="filter($event.value)" 
                        placeholder="Any" [showClear]="true"></p-select>
            </ng-template>
          </p-columnFilter>
        </th>
        <th><p-columnFilter type="numeric" field="amount" display="menu" currency="USD"></p-columnFilter></th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-record>
      <tr [pSelectableRow]="record">
        <td><p-tableRadioButton [value]="record"></p-tableRadioButton></td>
        <td>{{record.id}}</td>
        <td>{{record.issueName}}</td>
        <td>{{record.currency}}</td>
        <td>{{record.amount | currency: record.currency}}</td>
        <td>
          <p-tag [value]="record.status" [severity]="getSeverity(record.status)" [rounded]="true"></p-tag>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog [(visible)]="editDialog" header="Edit Record" [modal]="true">
    <div class="p-fluid">
      <div class="field">
        <label>Issue Name</label>
        <input pInputText [(ngModel)]="clonedRecord.issueName" />
      </div>
    </div>
    <ng-template pTemplate="footer">
      <button pButton label="Save" (click)="saveEdit()"></button>
    </ng-template>
  </p-dialog>
</div>